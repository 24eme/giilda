# You can find more information about this file on the symfony website:
# http://www.symfony-project.org/reference/1_4/en/11-App

# default values
all:
  statistiques:
    stats:
      statistiques:
        exportations:
          aggregation:
            filter:
              term:
                doc.mouvements.type_hash: 'export_details'
            aggs:
              agg_page:
                terms:
                  field: 'doc.mouvements.appellation'
                aggs:
                  agg_line:
                    terms:
                      field: 'doc.mouvements.detail_libelle'
                      order:
                        total: desc
                    aggs:
                      blanc:
                        filter:
                          term:
                            doc.mouvements.couleur: 'blanc'
                        aggs:
                          agg_column:
                            sum:
                              field: 'doc.mouvements.volume'
                              script: '_value * -1'
                      rose:
                        filter:
                          term:
                            doc.mouvements.couleur: 'rose'
                        aggs:
                          agg_column:
                            sum:
                              field: 'doc.mouvements.volume'
                              script: '_value * -1'
                      rouge:
                        filter:
                          term:
                            doc.mouvements.couleur: 'rouge'
                        aggs:
                          agg_column:
                            sum:
                              field: 'doc.mouvements.volume'
                              script: '_value * -1'
                      total:
                        filter:
                          terms:
                            doc.mouvements.couleur: ['blanc', 'rose', 'rouge']
                        aggs:
                          agg_column:
                            sum:
                              field: 'doc.mouvements.volume'
                              script: '_value * -1'
                      
          datas: "/tmp/sancerre/export_bi_mouvements.csv"
          libelle: "Exports"
          csv_headers: "Appellation;Pays;Blanc;Rose;Rouge;Total"
          pivot: [8,22]
          columns: 11
          aggregat: [20]
          total_pivot: [8]
          total_column: 1
          filters:
            14: '/export_details/'
          form_filters:
            appellations:
              ind: 8
            familles:
              ind:
            region:
              ind:
            dates:
              ind: 4
        stock_article:
          datas: "/tmp/sancerre/export_bi_drm_stock.csv"
          libelle: "Stocks article"
          csv_headers: "Appellation;Couleur;Stock initial;Stock actuel"
          pivot: [6,9]
          columns: 2
          aggregat: [13,18]
          total_pivot: [6]
          full_total_pivot: 1
          form_filters:
            appellations:
              ind: 6
            familles:
              ind:
            region:
              ind:
            dates:
              ind: 11
        sorties_appellation:
          datas: "/tmp/sancerre/export_bi_mouvements.csv"
          libelle: "Sorties appellation"
          csv_headers: "Appellation;Couleur;Export;France;Vrac;Total"
          pivot: [8,11]
          columns: 14
          aggregat: [20]
          total_pivot: [8]
          total_column: 1
          full_total_pivot: 1
          filters:
            14: '/export_details|sorties\/vracsanscontratsuspendu|sorties\/ventefrancecrd/'
          form_filters:
            appellations:
              ind: 8
            familles:
              ind:
            region:
              ind:
            dates:
              ind: 4
        prix_soumission:
          libelle: "Prix moyen de vente"
    drm:
      title: "Etat des lieux de saisie des DRMs"
      nb_resultat: 20
      elasticsearch_type: "DRM"
      champs:
        id:
          libelle: "Identifiant"
          noeud: "_id"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        mode_de_saisie:
          libelle: "Saisie"
          noeud: "mode_de_saisie"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        etablissement_raison_sociale:
          libelle: "Raison sociale"
          noeud: "declarant.raison_sociale"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        etablissement_nom_commerical:
          libelle: "Nom"
          noeud: "declarant.nom"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        total_debut_mois:
          libelle: "Total début de mois"
          noeud: "%declaration%.total_debut_mois"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
        total_entrees_nettes:
          libelle: "Total entrées nettes"
          noeud: "%declaration%.total_entrees_nettes"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
        total_entrees_reciproque:
          libelle: "Total entrées avec réciproque"
          noeud: "%declaration%.total_entrees_reciproque"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
        total_sorties_nettes:
          libelle: "Total sorties nettes"
          noeud: "%declaration%.total_sorties_nettes"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
        total_sorties_reciproque:
          libelle: "Total sorties avec réciproque"
          noeud: "%declaration%.total_sorties_reciproque"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
        total_fin_de_mois:
          libelle: "Total fin de mois"
          noeud: "%declaration%.total"
          need_replace: true
          replace: "%declaration%"
          var_replace: "hashProduitFilter"
          print_number: true
    vrac:
      title: "Etat des lieux de saisie des contrats interprofessionnels"
      nb_resultat: 20
      elasticsearch_type: "VRAC"
      champs:
        id:
          libelle: "Visa"
          noeud: "_id"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        produit:
          libelle: "Produit"
          noeud: "produit_libelle"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        label:
          libelle: "Label"
          noeud: "labels_libelle"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        mentions:
          libelle: "Mentions"
          noeud: "mentions_libelle"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        volume:
          libelle: "Volume"
          noeud: "volume_propose"
          need_replace: false
          replace: null
          var_replace: null
          print_number: true
        prix_unitaire:
          libelle: "Prix unitaire"
          noeud: "prix_unitaire"
          need_replace: false
          replace: null
          var_replace: null
          print_number: true
        date_saisie:
          libelle: "Saisie"
          noeud: "valide.date_saisie"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        vendeur:
          libelle: "Vendeur"
          noeud: "vendeur.raison_sociale"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        acheteur:
          libelle: "Acheteur"
          noeud: "acheteur.raison_sociale"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        courtier:
          libelle: "Courtier"
          noeud: "mandataire.raison_sociale"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
        statut:
          libelle: "Statut"
          noeud: "valide.statut"
          need_replace: false
          replace: null
          var_replace: null
          print_number: false
